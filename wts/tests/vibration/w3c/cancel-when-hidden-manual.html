<!DOCTYPE html>
<meta charset='utf-8'>
<title>Vibration API: cancel ongoing vibrate() when hidden by switching tab/window</title>
<link rel='author' title='Intel' href='http://www.intel.com'>
<link rel='help' href='http://dev.w3.org/2009/dap/vibration/#vibration-interface'>
<meta name='flags' content='interact'>
<meta name='assert' content='If the visibilitychange event is dispatched at the Document in a browsing context, cancel the pre-existing instance of the processing vibration patterns algorithm'>
<style>
  button {
    height: 100px;
    width:  100px;
  }
</style>

<h1>Description</h1>
<p>
  After hitting the button below, your device must vibrate, and stop when switch test to background.
  If it does not stop after switch then the test has failed.
</p>
<button id='vib'>Vibrate!</button>
<script src='vendor-prefix.js' data-prefixed-objects='[{"ancestors":["navigator"], "name":"vibrate"}]'></script>
<script>

  if (undefined !== navigator.vibrate) {
    document.getElementById('vib').onclick = function () {
      navigator.vibrate(50000);
    };
  }
</script>

